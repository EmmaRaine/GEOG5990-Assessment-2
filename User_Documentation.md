# Development Process

The first stage of model creation, after importing relevant libraries and defining variables and lists, was reading in the drunk.plan text file to the town list and plotting this using the matplotlib.pyplot function "imshow". However, to more clearly display houses/pub location I wanted to extract house and pub points to manually plot in the model. It became clear that houses and the pub were not just one point on the map but rather a series of coordinates. To retrieve these points, a loop was created using the town file, enumerating to obtain the house and pub x/y coordinates and saving these to a corresponding list. These could then be plotted using the plt.scatter module to display house/pub locations within the town. Following this, the length of the pub list was identified and the mid-point located so that these cooridnates could be utilised as the starting point for drunks. These were stored in corresponding variables defined as pub_x and pub_y.

It was then crucial to create the Drunks class to give them some behviour and allow them to walk through the town, stopping at their home. This was done in the drunkframework1.py file. In this file, firstly, a constructor function (init) was created to initialise class attributes (density, identifier, pub_x, pub_y, drunks, town). Then, the ‘walk_home’ function, which uses the random library to pseudo-randomly move drunks within the town boundaries, was created. To allow the user to adapt the model if they would like, the Move variable was created which can be altered, in turn altering the speed the drunks move through the town. Finally, the increase_density function was created which adds 1 to a point when a drunk person passes over it. Drunkframework1 was imported into the model and the Drunks class appended to the empty drunks list. Here, drunks were assigned a value between 10-250 (their identifier) to denote the drunks house number, thus where they should stop moving. 

As a final step in developing the model the movement of drunks needed to be displayed as a heatmap and written out to a text file. A for-loop was created to define drunks movement which involved stating that drunks should only move and density should only increase while their coordinates were not equal to a set of coordinates in their house (i.e. not equal to their identifier). This information was then plotted. I noticed that the original heatmap was not very aesthetically interesting so I changed the colour scheme, plotted the pub and plotted the drunks final location for context. This was then written out to a text file.

# Running the Model

The model was created in the Spyder application using an iPython console. To run the model, the simplest way it to press the green 'run' button at the top of the Spyder window. This computes the code which on average takes between 10-30 seconds. There are a few ways to reduce the time it takes to run the model which are highlighted in the [here](https://github.com/EmmaRaine/GEOG5990-Assessment-2/blob/main/Issues_and_Development.md). This runs all of the code at once, printing all variables into the variable explorer and all print functions into the console. However, there are a few ways the model can be run.

In model creation, I set the backend to inline. To do this go to Tools > Preferences > iPython Console > Graphics and from here select inline from the backend dropdown. This allows the model to run printing any plots within the console. However, the model can also be run using the automatic backend which opens plots in a seperate window. This is ideal for viewing plots as it shows them at a larger scale, making them clearer for the user to see and understand.

# Testing

The main way the model code was tested involved using the print() function. Throughout the code, this function was used to print a specified message, followed by a value, to the screen in order to ensure that what was expected of certain functions, methods and variables was returned in the model. This reveals what is going on inside the code, allowing me to see whether the model was running and producing outputs as were expected.

Additionally, the built-in debugger in spyder was used after any additions or alterations to the code in order to 'debug' it. This enabled what was going on in the program to be identified and solved.

Finally, the models final output was tested by producing a seperate plot of the town and drunks to ensure they were located at their homes. This ensured that the model was working properly and that drunk agents were behaving as expected. This is left in the code but can be commented out as it is not essential in the final product.

# Sources

In the model development process, guidance was taken from stack overflow. In particular, this was used to help me to find a way of extracting my house and coordinate points as well as determining how to find the mid-point of the pub lists. In addition, using the matplotlib.pyplot documentation ([available here](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.annotate.html)) I took guidance on how to annotate my points with their identifier to add context to the map. I also utilised code I developed in practical sessions and the first assignment to initiate my move function although I added in the 'Move' variable to allow the user to easily manipulate the code and edit the drunks behaviours. Finally, as outlined in the the drunksframework1.py file, I utilised and adapted some code created by Max Eschenbach to attempt to stop drunks retracing their steps.
