# Development Process

The first stage of model creation, after importing relevant libraries and definining variables and lists, was reading in the drunk.plan text file to the town list and plotting this using the matplotlib.pyplot function "imshow". However, to show more clearly the houses and pub location I wanted to extract house and pub points to manually plot in the model. It became clear that houses and the pub were not just one point on the map but rather a series of coordinates. To retrieve these points, a loop was created using the town file, enumerating to obtain the house and pub x/y coordinates and saving these to a corresponding list. To plot these coordinates, another loop was created, stating the length of the environment, before specifying the lists containing the x and y coordinates as the x and y coordinates to be plotted as a scatter. This produced a plot of the house locations and pub location within the town. Following this, the length of the pub list was identified and the mid-point located so that these cooridnates could be utilised as the starting point for drunks. These were stored in corresponding variables defined as pub_x and pub_y.

Following on, it was then crucial to create the Drunks class to give them some behviour and allow them to walk through the town, stopping at their home. This was done in the drunkframework1.py file and involved the creation of a series of functions that would allow the drunks to move through the town. In this file, firstly, a constructor function (init) was created to initialise the attributes of the class (density, identifier, pub_x, pub_y, drunks, town). Then, the ‘walk_home’ function, which uses the random library to pseudo-randomly move the drunks within the boundaries of the town was created. To allow the user to adapt the model if they would like, the Move variable was created which can be altered, in turn altering the speed the drunks move through the town. Finally, the increase_density function was created which adds 1 a point when a drunk person passes over it. This drunkframework1.py file was imported in the model and the Drunks class was appended to the empty drunks list. Here, drunks were assigned a value between 10-250 (their identifier) to denote the drunks house number, thus when they should stop moving. 

As a final step in developing the model the movement of drunks needed to be displayed as a heatmap and written out to a text file. A for-loop was created to define drunks movement which involved stating that drunks should only move and density should only be increased while their coordinates were not equal to a set of coordinates in their house (i.e. not equal to their identifier). I then plotted this information. I noticed that the original heatmap was not very aesthetically interesting so I changed the colour scheme, plotted the pub and plotted the drunks final location to add context to the maps. This was then written out to a text file.

# Running the Model

The model was created in the Spyder application using an iPython console. To run the model, the simplest way it to press the green 'run' button at the top of the Spyder window. This computes the code which on average takes between 10-30 seconds to run. There are a few ways to reduce the time it takes to run the model which are highlighted in the ([Model_Issues](https://github.com/EmmaRaine/GEOG5990-Assessment-2/blob/main/Model_Issues.md)) document.  This runs all of the code at once, prinitng all variables into the variable explorer and all print functions into the console. However, there are a few ways the model can be run.

In model creation, I set the backend to inline. To do this go to Preferences > Tools > iPython Console > Graphics and from here select inline from the backend dropdown. This allows the model to run printing any plots within the console. However, the model can also be run using the automatic backend which prints variables in the variable explorer and print functions in the console although it opens plots in a seperate window. This is more ideal for viewing the plots as it shows them at a larger scale, making them clearer for the user to see and understand.

# Testing

The main way the model code was tested involved using the print() function. Throughout the code, this function was used to print a specified message, followed by a value, to the screen in order to ensure that what was expected of certain functions, methods and variables was returned in the model. This reveals what is going on inside the code, allowing me to see whether the model was running and producing outputs as were expected.

Additionally, the built-in debugger in spyder was used after any additions or alterations to the code in order to 'debug' it. This enabled what was going on in the program to be identified and solved.

Finally, the final model was tested by producing a seperate plot of the town and drunks to ensure they were located at their homes. This ensured that the model was working properly and that drunk agents were behaving as expected. This is left in the code but can be commented out as it is not essential in the final product.

# Sources

In the model development process, guidance was taken from stack overflow. In particular, this was used to help me to find a way of extracting my house and coordinate points as well as determining how to find the mid-point of the pub lists. In addition, using the matplotlib.pyplot documentation ([available here](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.annotate.html)) I took guidance on how to annotate my points with their identifier to add some context to the map. I also utilised some of the code I developed in practical sessions and the first assignment to initiate my move function although I added in the 'Move' variable to allow the user to easily manipulate the code and edit the drunks behaviours. Finally, as outlined in the the drunksframework1.py file, I utilised and adapted some code created by Max Eschenbach to attempt to stop drunks retracing their steps.
